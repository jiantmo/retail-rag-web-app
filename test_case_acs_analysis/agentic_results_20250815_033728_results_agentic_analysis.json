{
  "file_info": {
    "file_path": "test_case_acs_analysis\\agentic_results_20250815_033728_results.jsonl",
    "file_size_mb": 5.04,
    "total_lines": 1743,
    "valid_results": 1743,
    "parsing_success_rate": 100.0
  },
  "search_performance": {
    "total_searches": 1743,
    "api_successful_calls": 1743,
    "search_execution_successful": 28,
    "throttled_requests": 1711,
    "other_errors": 4,
    "api_failed_calls": 0,
    "api_success_rate": 100.0,
    "search_execution_success_rate": 1.6064257028112447,
    "throttling_rate": 98.16408491107286,
    "avg_response_time_ms": 5043.236357414784,
    "median_response_time_ms": 4821.039199829102,
    "p95_response_time_ms": 5365.982532501221,
    "p99_response_time_ms": 13548.008918762207,
    "min_response_time_ms": 1669.5122718811035,
    "max_response_time_ms": 17204.61368560791,
    "status_code_distribution": {
      "200": 1743
    },
    "error_analysis": {
      "throttled_examples": [
        "Error processing search request: Agentic retrieval failed: TooManyRequests - {\"error\":{\"code\":\"\",\"message\":\"Could not complete model action. The model endpoint returned status code '429' (TooManyReque",
        "Error processing search request: Agentic retrieval failed: TooManyRequests - {\"error\":{\"code\":\"\",\"message\":\"Could not complete model action. The model endpoint returned status code '429' (TooManyReque",
        "Error processing search request: Agentic retrieval failed: TooManyRequests - {\"error\":{\"code\":\"\",\"message\":\"Could not complete model action. The model endpoint returned status code '429' (TooManyReque"
      ],
      "other_error_examples": [
        "{\"error\":{\"code\":\"\",\"message\":\"Failed to query Search index 'retail-acs-index'\"}}",
        "{\"error\":{\"code\":\"\",\"message\":\"Failed to query Search index 'retail-acs-index'\"}}",
        "{\"error\":{\"code\":\"\",\"message\":\"Failed to query Search index 'retail-acs-index'\"}}"
      ]
    }
  },
  "relevance_metrics": {
    "precision_at_k": {
      "P@1": 0.6428571428571429,
      "P@3": 0.6190476190476191,
      "P@5": 0.5714285714285714,
      "P@10": 0.525
    },
    "recall_at_k": {
      "R@1": 0.10980289551718123,
      "R@3": 0.2669086865515437,
      "R@5": 0.3859192394906681,
      "R@10": 0.6032868916797488
    },
    "f1_score_at_k": {
      "F1@1": 0.16557618968333254,
      "F1@3": 0.3368645010451733,
      "F1@5": 0.4194752456251793,
      "F1@10": 0.5252508447384224
    },
    "ndcg_at_k": {
      "NDCG@1": 0.8928571428571429,
      "NDCG@3": 0.8871939772998315,
      "NDCG@5": 0.8597148535324933,
      "NDCG@10": 0.8880399552068972
    },
    "map_score": 0.6243933910005338,
    "mrr_score": 0.6547619047619048,
    "relevance_analysis": {
      "total_queries_for_relevance_calculation": 28,
      "total_api_calls_made": 1743,
      "throttled_requests_excluded": 1711,
      "other_errors_excluded": 4,
      "total_relevant_items_found": 165,
      "exact_name_matches": 23,
      "total_product_items_extracted": 337,
      "average_relevance_per_successful_query": 5.892857142857143,
      "average_products_per_successful_query": 12.035714285714286,
      "exclusion_summary": {
        "excluded_for_throttling": 1711,
        "excluded_for_other_errors": 4,
        "included_in_relevance_metrics": 28,
        "exclusion_rate": 98.39357429718876
      }
    },
    "question_type_breakdown": {
      "Category + Attribute value": {
        "precision_at_k": {
          "P@1": 1.0,
          "P@3": 1.0,
          "P@5": 1.0,
          "P@10": 1.0
        },
        "recall_at_k": {
          "R@1": 0.09447496947496947,
          "R@3": 0.2834249084249084,
          "R@5": 0.47237484737484736,
          "R@10": 0.8614163614163615
        },
        "f1_score_at_k": {
          "F1@1": 0.17181984681984683,
          "F1@3": 0.4371307341895577,
          "F1@5": 0.6333356854512685,
          "F1@10": 0.9201727419118724
        },
        "ndcg_at_k": {
          "NDCG@1": 1.0,
          "NDCG@3": 1.0,
          "NDCG@5": 1.0,
          "NDCG@10": 1.0
        },
        "map_score": 1.0,
        "mrr_score": 1.0,
        "query_count": 9,
        "relevance_analysis": {
          "total_queries_analyzed": 9,
          "total_relevant_items_found": 101,
          "exact_name_matches": 0,
          "average_relevance_per_query": 11.222222222222221
        }
      },
      "Category + Price range": {
        "precision_at_k": {
          "P@1": 1.0,
          "P@3": 0.9166666666666666,
          "P@5": 0.65,
          "P@10": 0.475
        },
        "recall_at_k": {
          "R@1": 0.18541666666666667,
          "R@3": 0.49375,
          "R@5": 0.5854166666666667,
          "R@10": 0.85625
        },
        "f1_score_at_k": {
          "F1@1": 0.3103174603174603,
          "F1@3": 0.6333874458874459,
          "F1@5": 0.6083139083139083,
          "F1@10": 0.602579365079365
        },
        "ndcg_at_k": {
          "NDCG@1": 1.0,
          "NDCG@3": 0.9608934394981037,
          "NDCG@5": 0.852401942989439,
          "NDCG@10": 0.9115679043544
        },
        "map_score": 0.7953370703370704,
        "mrr_score": 1.0,
        "query_count": 4,
        "relevance_analysis": {
          "total_queries_analyzed": 4,
          "total_relevant_items_found": 23,
          "exact_name_matches": 23,
          "average_relevance_per_query": 5.75
        }
      },
      "Description": {
        "precision_at_k": {
          "P@1": 0.25,
          "P@3": 0.20833333333333331,
          "P@5": 0.17500000000000002,
          "P@10": 0.1
        },
        "recall_at_k": {
          "R@1": 0.15,
          "R@3": 0.2625,
          "R@5": 0.35,
          "R@10": 0.375
        },
        "f1_score_at_k": {
          "F1@1": 0.16666666666666669,
          "F1@3": 0.20625,
          "F1@5": 0.21309523809523812,
          "F1@10": 0.14772727272727273
        },
        "ndcg_at_k": {
          "NDCG@1": 0.875,
          "NDCG@3": 0.8622061408510818,
          "NDCG@5": 0.8385334996500686,
          "NDCG@10": 0.8533401145335952
        },
        "map_score": 0.28770833333333334,
        "mrr_score": 0.2916666666666667,
        "query_count": 8,
        "relevance_analysis": {
          "total_queries_analyzed": 8,
          "total_relevant_items_found": 8,
          "exact_name_matches": 0,
          "average_relevance_per_query": 1.0
        }
      },
      "Category": {
        "precision_at_k": {
          "P@1": 1.0,
          "P@3": 1.0,
          "P@5": 1.0,
          "P@10": 1.0
        },
        "recall_at_k": {
          "R@1": 0.09417989417989418,
          "R@3": 0.28253968253968254,
          "R@5": 0.47089947089947093,
          "R@10": 0.9047619047619048
        },
        "f1_score_at_k": {
          "F1@1": 0.1717171717171717,
          "F1@3": 0.4381598793363499,
          "F1@5": 0.6357560568086884,
          "F1@10": 0.9444444444444444
        },
        "ndcg_at_k": {
          "NDCG@1": 1.0,
          "NDCG@3": 1.0,
          "NDCG@5": 1.0,
          "NDCG@10": 1.0
        },
        "map_score": 1.0,
        "mrr_score": 1.0,
        "query_count": 3,
        "relevance_analysis": {
          "total_queries_analyzed": 3,
          "total_relevant_items_found": 33,
          "exact_name_matches": 0,
          "average_relevance_per_query": 11.0
        }
      },
      "Exact word": {
        "precision_at_k": {
          "P@1": 0.0,
          "P@3": 0.0,
          "P@5": 0.0,
          "P@10": 0.0
        },
        "recall_at_k": {
          "R@1": 0.0,
          "R@3": 0.0,
          "R@5": 0.0,
          "R@10": 0.0
        },
        "f1_score_at_k": {
          "F1@1": 0.0,
          "F1@3": 0.0,
          "F1@5": 0.0,
          "F1@10": 0.0
        },
        "ndcg_at_k": {
          "NDCG@1": 0.5,
          "NDCG@3": 0.5250521198985535,
          "NDCG@5": 0.4885350324378769,
          "NDCG@10": 0.5980315530266896
        },
        "map_score": 0.0,
        "mrr_score": 0.0,
        "query_count": 4,
        "relevance_analysis": {
          "total_queries_analyzed": 4,
          "total_relevant_items_found": 0,
          "exact_name_matches": 0,
          "average_relevance_per_query": 0.0
        }
      }
    }
  },
  "coverage_metrics": {
    "total_products_returned": 337,
    "avg_products_per_query": 12.035714285714286,
    "avg_products_per_successful_query": 12.035714285714286,
    "median_products_per_query": 12.0,
    "zero_results_count": 1715,
    "zero_results_rate": 98.39357429718876,
    "successful_executions": 28,
    "successful_execution_rate": 1.6064257028112447,
    "max_products_single_query": 18,
    "min_products_single_query": 8
  },
  "detailed_analysis": {
    "question_type_distribution": {
      "Category": 349,
      "Category + Attribute value": 348,
      "Category + Price range": 349,
      "Exact word": 349,
      "Description": 348
    },
    "product_category_distribution": {
      "footwear": 243,
      "gloves": 105,
      "bike": 160,
      "tent": 100,
      "clothing": 395,
      "accessory": 240,
      "shorts_pants": 120,
      "backpack": 140,
      "hat": 130,
      "sleeping": 50,
      "helmet": 60
    }
  },
  "throttling_summary": {
    "total_requests": 1743,
    "successful_executions": 28,
    "throttled_requests": 1711,
    "other_errors": 4,
    "api_failures": 0,
    "throttling_rate": 98.16408491107286,
    "success_rate": 1.6064257028112447,
    "throttling_by_question_type": {
      "Exact word": 345,
      "Category": 345,
      "Category + Price range": 344,
      "Description": 339,
      "Category + Attribute value": 338
    },
    "throttling_by_category": {
      "gloves": 103,
      "bike": 158,
      "clothing": 390,
      "tent": 98,
      "footwear": 236,
      "accessory": 235,
      "shorts_pants": 119,
      "backpack": 134,
      "hat": 130,
      "sleeping": 48,
      "helmet": 60
    },
    "retry_after_analysis": {
      "retry_times_found": 1711,
      "avg_retry_after_seconds": 30.70134424313267,
      "max_retry_after_seconds": 60,
      "min_retry_after_seconds": 1
    },
    "relevance_calculation_impact": {
      "requests_excluded_from_relevance": 1715,
      "requests_included_in_relevance": 28,
      "exclusion_percentage": 98.39357429718876
    }
  },
  "agentic_specific_metrics": {
    "successful_executions_analyzed": 28,
    "activity_metrics": {
      "total_ai_planning_operations": 0,
      "avg_search_operations_per_query": 0,
      "avg_total_steps_per_query": 0,
      "search_operations_distribution": {}
    },
    "token_usage": {
      "avg_planning_input_tokens": 0,
      "avg_planning_output_tokens": 0,
      "total_planning_input_tokens": 0,
      "total_planning_output_tokens": 0
    },
    "knowledge_base_usage": {
      "avg_documents_referenced": 0,
      "max_documents_referenced": 0,
      "min_documents_referenced": 0,
      "references_distribution": {}
    }
  },
  "analysis_metadata": {
    "generated_at": "2025-08-17T23:35:45.359566",
    "analysis_type": "agentic_search_evaluation_with_improved_relevance",
    "relevance_scoring": "question_type_specific",
    "search_api_type": "agentic_search_api",
    "response_format": "formatted_text_with_ref_ids",
    "metrics_included": [
      "precision_at_k",
      "recall_at_k",
      "f1_score_at_k",
      "map_score",
      "ndcg_at_k",
      "mrr_score",
      "response_times",
      "coverage_metrics",
      "agentic_activity_metrics"
    ]
  }
}